function init(){for(var a=0;rows>a;a++){var b=document.createElement("div"),c=[];copyOfColors=colors.slice(),b.classList.add("obox"),main.appendChild(b);for(var d=0;columns>d;d++){var e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div");e.classList.add("ibox"),f.classList.add("flipper"),g.classList.add("front"),h.classList.add("back"),color=getRandomColor(a,d,c),g.style.background=color,b.appendChild(e),e.appendChild(f),f.appendChild(g),f.appendChild(h)}prevLine.push(c)}for(var a=0;a<boxes.length;a++){var i=Math.round(Math.random()*boxes.length);boxes[a].style.opacity="0",setTimeout(showBox,100*i,a)}mainContent.style.width=2*boxes[0].offsetWidth+"px",mainContent.style.height=2*boxes[0].offsetHeight+5+"px",mainContent.style.top=2*boxes[0].offsetHeight+"px"}function showBox(a){boxes[a].style.transition="opacity 0.5s linear 0s",boxes[a].style.opacity="1",flippers[a].style.height=boxes[a].offsetHeight+"px",fronts[a].style.width=boxes[a].offsetWidth+"px",fronts[a].style.height=boxes[a].offsetHeight+"px",backs[a].style.width=boxes[a].offsetWidth+"px",backs[a].style.height=boxes[a].offsetHeight+"px"}function getRandomColor(a,b,c){var d,e=Math.round(Math.random()*(copyOfColors.length-1));return prevLine.length>0?0==b?(d=prevLine[a-1][5],e=copyOfColors.indexOf(prevLine[a-1][5])):b>0&&prevLine[a-1][b]===copyOfColors[e]?e<copyOfColors.length-1?d=copyOfColors[e+=1]:1!=copyOfColors.length&&(d=copyOfColors[e-=1]):d=copyOfColors[e]:d=copyOfColors[e],c.push(copyOfColors[e]),copyOfColors.splice(e,1),d}function getRandomFlipper(){var a={randomNumber:Math.round(Math.random()*flippers.length),flipper:function(){return flippers[this.randomNumber]}};return a}var main=document.getElementById("main-container"),boxes=document.getElementsByClassName("ibox"),flippers=document.getElementsByClassName("flipper"),fronts=document.getElementsByClassName("front"),backs=document.getElementsByClassName("back"),mainContent=document.getElementById("main-content"),colors=["rgba(0, 165, 191, 0.5)","rgba(0, 110, 127, 0.5)","rgba(0, 221, 255, 0.5)","rgba(0, 55, 64, 0.5)","rgba(0, 199, 229, 0.5)","rgba(27,120,127,0.5)"],prevLine=[],current,rows=5,columns=6,usedBoxes=[];init();